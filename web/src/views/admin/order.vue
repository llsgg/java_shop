<template>  <div>    <!--页面区域-->    <div class="page-view">      <div class="table-operations">        <a-space><!--          <a-button type="primary" @click="handleAdd">模拟新增</a-button>-->          <a-button @click="handleBatchDelete">批量删除</a-button>        </a-space>      </div><!--      <a-table--><!--        size="middle" &lt;!&ndash; 表格尺寸设置为中等 &ndash;&gt;--><!--        rowKey="id" &lt;!&ndash; 每行的唯一键设置为'id' &ndash;&gt;--><!--        :loading="data.loading" &lt;!&ndash; 表格的加载状态，由'data.loading'控制 &ndash;&gt;--><!--        :columns="columns" &lt;!&ndash; 列定义，从'columns'属性获取 &ndash;&gt;--><!--        :data-source="data.tagList" &lt;!&ndash; 数据源，从'data.tagList'获取 &ndash;&gt;--><!--        :scroll="{ x: 'max-content' }" &lt;!&ndash; 启用X轴滚动，宽度为最大内容 &ndash;&gt;--><!--        :row-selection="rowSelection" &lt;!&ndash; 行选择功能，由)rowSelection'属性控制 &ndash;&gt;--><!--        :pagination="{--><!--        size: 'default', &lt;!&ndash; 分页大小默认 &ndash;&gt;--><!--        current: data.page, &lt;!&ndash; 当前页数，绑定到'data.page' &ndash;&gt;--><!--        pageSize: data.pageSize, &lt;!&ndash; 每页条目数，绑定到'data.pageSize' &ndash;&gt;--><!--        onChange: (current) => (data.page = current), &lt;!&ndash; 分页变化时更新当前页 &ndash;&gt;--><!--        showSizeChanger: false, &lt;!&ndash; 隐藏页码更改选项 &ndash;&gt;--><!--        showTotal: (total) => `共${total}条数据`, &lt;!&ndash; 显示总数信息 &ndash;&gt;--><!--        }" &lt;!&ndash; 分页配置 &ndash;&gt;--><!--      >-->      <a-table        size="middle"        rowKey="id"        :loading="data.loading"        :columns="columns"        :data-source="data.tagList"        :scroll="{ x: 'max-content' }"        :row-selection="rowSelection"        :pagination="{          size: 'default',          current: data.page,          pageSize: data.pageSize,          onChange: (current) => (data.page = current),          showSizeChanger: false,          showTotal: (total) => `共${total}条数据`,        }"      >        <template #bodyCell="{ text, record, index, column }">          <template v-if="column.key === 'status'">            <a-tag :color="text === '1'? '#2db7f5':'#87d068'">              {{text === '1'? '待支付': text === '2'? '已支付':'已取消'}}            </a-tag>          </template>          <template v-if="column.key === 'operation'">            <span>              <a-popconfirm title="确定删除?" ok-text="是" cancel-text="否" @confirm="confirmDelete(record)">                <a>删除</a>              </a-popconfirm>            </span>          </template>        </template>      </a-table>    </div>  </div></template><script setup lang="ts">  import { FormInstance, message } from 'ant-design-vue';  import { createApi, listApi, updateApi, deleteApi, cancelApi } from '/@/api/order';  import {getFormatTime} from "/@/utils";   // 创建表格列的配置   const columns = reactive([     {       title: '序号',       dataIndex: 'index',       key: 'index',       align: 'center' // 居中显示     },     {       title: '用户',       dataIndex: 'username',       key: 'username',       align: 'center' // 居中显示     },     {       title: '商品',       dataIndex: 'title',       key: 'title',       align: 'center', // 居中显示       // 自定义渲染函数，用于截取商品标题的前10个字符并添加省略号，如果标题为空则显示"--"       customRender: ({text}) => text ? text.substring(0, 10) + '...' : '--'     },     {       title: '状态',       dataIndex: 'status',       key: 'status',       align: 'center', // 居中显示       // 使用scopedSlots进行自定义渲染，渲染内容由模板决定       scopedSlots: {customRender: 'status'}     },     {       title: '订单时间',       dataIndex: 'orderTime',       key: 'orderTime',       align: 'center', // 居中显示       // 自定义渲染函数，用于格式化订单时间       customRender: ({text}) => getFormatTime(text, true)     },     {       title: '操作',       dataIndex: 'action',       key: 'operation',       align: 'center', // 居中显示       fixed: 'right', // 固定在表格的右端       width: 120, // 操作列宽度设置为120px     },   ]);  // 页面数据  const data = reactive({    tagList: [],    loading: false,    keyword: '',    selectedRowKeys: [] as any[],    pageSize: 10,    page: 1,  });  onMounted(() => {    getDataList();  });   /**    * 获取数据列表的函数。    * 无参数。    * 无显式返回值，但会更新data对象中的tagList和loading属性。    */   const getDataList = () => {     // 设置加载状态为true     data.loading = true;     // 调用listApi，传入关键字参数     listApi({       keyword: data.keyword,     })       .then((res) => {         // 请求成功后，设置加载状态为false         data.loading = false;         console.log(res);         // 为响应数据的每一项添加索引         res.data.forEach((item: any, index: any) => {           item.index = index + 1;         });         // 更新data对象中的tagList为处理后的数据         data.tagList = res.data;       })       .catch((err) => {         // 请求失败后，设置加载状态为false         data.loading = false;         console.log(err);       });   };   // 创建并初始化 rowSelection 变量，作为一个 ref 对象，用于处理表格行选择的逻辑   const rowSelection = ref({     // 定义onChange回调函数，当选择的行发生变化时被调用     onChange: (selectedRowKeys: (string | number)[], selectedRows: DataItem[]) => {       // 打印选中行的 key 数组和选中行的数据数组到控制台       console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);       // 更新 data 对象中的 selectedRowKeys 属性，以保持数据同步       data.selectedRowKeys = selectedRowKeys;     },   });  const confirmDelete = (record: any) => {    console.log('delete', record);    deleteApi({ ids: record.id })      .then((res) => {        getDataList();      })      .catch((err) => {        message.error(err.msg || '操作失败');      });  };   /**    * 批量删除选中的项。    * 该函数首先检查是否有选中的项，如果没有则提醒用户选择删除项，并终止操作。    * 如果有选中的项，则调用deleteApi进行批量删除，成功后清除选中项并重新获取列表数据，失败则显示错误信息。    */   const handleBatchDelete = () => {     console.log(data.selectedRowKeys); // 打印选中项的key数组     // 检查是否有选中的项，没有则提醒用户并返回     if (data.selectedRowKeys.length <= 0) {       console.log('hello');       message.warn('请勾选删除项');       return;     }     // 调用删除接口，传入选中项的key数组拼接成的字符串作为ids     deleteApi({ ids: data.selectedRowKeys.join(',') })       .then((res) => {         // 删除成功，显示成功消息，清空选中项并重新获取列表数据         message.success('删除成功');         data.selectedRowKeys = [];         getDataList();       })       .catch((err) => {         // 删除失败，显示错误信息         message.error(err.msg || '操作失败');       });   };</script><style scoped lang="less">  .page-view {    min-height: 100%;    background: #fff;    padding: 24px;    display: flex;    flex-direction: column;  }  .table-operations {    margin-bottom: 16px;    text-align: right;  }  .table-operations > button {    margin-right: 8px;  }</style>